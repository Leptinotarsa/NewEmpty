!function(a,t){"use strict";t.gui.keyInputBasic={width:360,otherState:{keys:[]}},t.gui.keyInputBasic.init=function(e){var r=a("<div>").attr("id","tombioKeyBasic").appendTo(e);t.gui.keyInputBasic.divSel="#tombioKeyBasic";var i={};for(var n in t.d.groupedCharacters.groups.forEach(function(a){i[a]=t.d.groupedCharacters[a]}),a("<button>").appendTo(r).text("Clear input").click(function(){t.d.characters.forEach(function(t){var e="#tbvKib"+t.Character;a(e).val(null),t.stateSet=!1,t.userInput=null}),t.f.refreshVisualisation()}),i){a("<div>").addClass("characterGroup").text(n).appendTo(r);for(var c=0;c<i[n].length;c++){var s=i[n][c],u=a("<div>").addClass("characterlabel").text(s.Label),o=a("<div>").append(u);r.append(o);var d="tbvKib"+s.Character;if("numeric"==s.ValueType){var h=a("<input>").attr("type","number").attr("id",d).addClass("numberControl").appendTo(o),p=s.Params.split(",");h.attr("min",p[0]).attr("max",p[1]).attr("step",p[2]);var l={id:d,char:s.Character};h.change(l,function(e){var r=a("#"+e.data.id).val();isNaN(r)||""==r?(t.d.oCharacters[e.data.char].userInput=null,t.d.oCharacters[e.data.char].stateSet=!1):(t.d.oCharacters[e.data.char].userInput=r,t.d.oCharacters[e.data.char].stateSet=!0),t.f.refreshVisualisation()})}else{var f=a("<select>").attr("id",d).addClass("characterSelect").appendTo(o);if("multi"==s.ControlType&&f.attr("multiple","multiple"),"single"==s.ControlType)a("<option>").text("").val("").appendTo(f);s.CharacterStateValues.forEach(function(t,e){a("<option>").text(t).val(e).appendTo(f)});l={id:d,char:s.Character};f.change(l,function(e){var r=[];a("#"+e.data.id+" option:selected").each(function(){""!=a(this).val()&&r.push(a(this).val())}),r.length>0?(t.d.oCharacters[e.data.char].userInput=r,t.d.oCharacters[e.data.char].stateSet=!0):(t.d.oCharacters[e.data.char].userInput=null,t.d.oCharacters[e.data.char].stateSet=!1),t.f.refreshVisualisation()})}}}t.f.checkInterface("keyInputBasic",t.templates.gui.keyInput,t.gui.keyInputBasic)},t.gui.keyInputBasic.initFromCharacterState=function(){t.d.characters.forEach(function(t){a("#tbvKib"+t.Character).val(t.stateSet?t.userInput:null)})},t.gui.keyInputBasic.initStateFromParams=function(a){this.initFromCharacterState()},t.gui.keyInputBasic.setParamsFromState=function(a){return a}}(jQuery,this.tombiovis);